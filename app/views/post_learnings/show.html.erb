<div class="first-show-view">
  <%= render 'shared/header' %>
  <div class="top-contents">
    <aside class="sidebar_left">
      <%= render 'shared/sidebar_left' %>
    </aside>
    <article class="home-article">
      <div class="show-top">
        <div class="show-main-left">
          <div class="show-post-time">
            <p><%= time_ago_in_words(@post_learning.created_at) %>前</p>
          </div>
          <div class="show-post-image">
            <p><%= image_tag @post_learning.post_image.variant(resize_to_limit: [300,200]) if @post_learning.post_image.attached? %></p> 
          </div>
          <div class="show-post-favorite">
            <% if @post_learning.favorited_by?(current_user) %>
              <p>
                <%= link_to post_learning_favorites_path(@post_learning), method: :delete do %>
                  ♥<%= @post_learning.favorites.count %> いいね
                <% end %>
              </p>
            <% else %>
              <p>
                <%= link_to post_learning_favorites_path(@post_learning), method: :post do %>
                  ♡<%= @post_learning.favorites.count %> いいね
                <% end %>
              </p>
            <% end %>
          </div>
        </div>
         
        <div class="show-main-right">
          <div class="show-post-name">
            <p>学習名：<%= @post_learning.learning_name %></p>
          </div>
          <div class="show-post-content">
            <p>頑張ったこと：<%= @post_learning.learning_content %></p>
          </div>
          <div class="show-post-real">
            <p>学びの本音：<%= @post_learning.learning_real %></p>
          </div>
          <div class="show-post-genre">
            <p>ジャンル：<%= @post_learning.genre.name %></p>
          </div>
        </div>
      </div>
      
      <div class="show-middle">
         <% if @post_learning.user == current_user %>
          <%= link_to "編集", edit_post_learning_path(@post_learning) %>
        <% elsif current_user.admin? && !current_user?(user) %> 
          <%= link_to "削除", post_learning_path(@post_learning.id), method: :delete, "data-confirm" => "本当に削除しますか？" %>
        <% end %>
      </div>
      
      <div class="show-post-comment">
        <%= form_with model: [@post_learning, @post_comment] do |f| %>
          <%= f.text_area :comment, rows: '5', placeholder: "コメントをここに" %>
          <%= f.submit "コメント投稿" %>
        <% end %>
      </div>
  
      <div class="show-comment">
        <% @post_learning.post_comments.each do |post_comment| %>
          <div class="show-comment-left">
            <div class="show-comment-user">
              <p><%= post_comment.user.name %></p>
            </div>
            <div class="show-user-image">
              <p><%= image_tag post_comment.user.get_profile_image(100,100) %></p>
            </div>
            <div class="show-comment-destroy">
              <% if post_comment.user == current_user %>
                <%= link_to "削除", post_learning_post_comment_path(post_comment.post_learning, post_comment), method: :delete %>
              <% elsif current_user.admin? && !current_user?(user) %>
                <%= link_to "削除", post_learning_post_comment_path(post_comment.post_learning, post_comment), method: :delete %>
              <% end %>
            </div>
          </div>
          <div class="show-comment-inner">
            <p><%= post_comment.comment %></p>
          </div>
        <% end %>
        
      </div>
    </article>
    <aside class="sidebar_right">
      <%= render 'shared/sidebar_right' %>
    </aside>
  </div>
</div>
